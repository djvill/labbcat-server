<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.18) on Wed Apr 05 18:11:57 ART 2023 -->
<title>Store (nzilbb.labbcat.server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-04-05">
<link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Store (nzilbb.labbcat.server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">nzilbb.labbcat.server.servlet</a></div>
<h2 title="Class Store" class="title">Class Store</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>GenericServlet</li>
<li>
<ul class="inheritance">
<li>HttpServlet</li>
<li>
<ul class="inheritance">
<li><a href="LabbcatServlet.html" title="class in nzilbb.labbcat.server.servlet">LabbcatServlet</a></li>
<li>
<ul class="inheritance">
<li><a href="StoreQuery.html" title="class in nzilbb.labbcat.server.servlet">StoreQuery</a></li>
<li>
<ul class="inheritance">
<li>Store</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>Serializable</code>, <code>Servlet</code>, <code>ServletConfig</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="StoreAdministration.html" title="class in nzilbb.labbcat.server.servlet">StoreAdministration</a></code></dd>
</dl>
<hr>
<pre>@WebServlet({"/edit/store/*","/api/edit/store/*"})
public class <span class="typeNameLabel">Store</span>
extends <a href="StoreQuery.html" title="class in nzilbb.labbcat.server.servlet">StoreQuery</a></pre>
<div class="block"><tt>/api/edit/store/&hellip;</tt> :
 <a href="https://nzilbb.github.io/ag/apidocs/nzilbb/ag/GraphStore.html">GraphStore</a>
 functions. This includes all requests supported by <a href="StoreQuery.html" title="class in nzilbb.labbcat.server.servlet"><code>StoreQuery</code></a>.
 <a id="createAnnotation(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Integer,java.lang.String)">
 <!--   -->
 </a>
 <ul class="blockList">
 <li class="blockList">
 <h4>/api/edit/store/createAnnotation</h4>
 <div class="block">Creates an annotation starting at <var>from</var> and ending at <var>to</var>.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>id</code> - The ID of the transcript.</dd>
 <dd><code>fromId</code> - The start anchor's ID.</dd>
 <dd><code>toId</code> - The end anchor's ID.</dd>
 <dd><code>layerId</code> - The layer ID of the resulting annotation.</dd>
 <dd><code>label</code> - The label of the resulting annotation.</dd>
 <dd><code>confidence</code> - The confidence rating.</dd>
 <dd><code>parentId</code> - The new annotation's parent's ID.</dd>
 <dt><span class="returnLabel">Returns:</span></dt>
 <dd>The ID of the new annotation.</dd>
 </dl>
 </li>
 </ul>
 <a id="destroyAnnotation(java.lang.String,java.lang.String)">
 <!--   -->
 </a>
 <ul class="blockList">
 <li class="blockList">
 <h4>/api/edit/store/destroyAnnotation</h4>
 <div class="block">Destroys the annotation with the given ID.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>id</code> - The ID of the transcript.</dd>
 <dd><code>annotationId</code> - The annotation's ID.</dd>
 </dl>
 </li>
 </ul>
 <a id="saveParticipant(Annotation)">
 <!--   -->
 </a>
 <ul class="blockList">
 <li class="blockList">
 <h4>/api/edit/store/saveParticipant</h4>
 <div class="block">Saves a participant, and all its tags, to the database.
 <p> If the participant ID does not already exist in the database, a new participant record is created.
 </div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>id</code> - The ID of the participant.</dd>
 <dd><code>label</code> - The new ID of the participant, if it's changing.</dd>
 <dd>A series of parameters whose names are prefixed "participant_", representing the participant attribute values. <br>
 <dd><code>_password</code> - An optional parameter for specifying a new pass phrase for the participant.</dd>
 </dd>
 <dt><span class="returnLabel">Returns:</span></dt>
 <dd>A JSON representation of the new participant record, structured as an Annotation.</dd>
 </dl>
 </li>
 </ul>
 <a id="saveTranscript(Graph)">
 <!--   -->
 </a>
 <ul class="blockList">
 <li class="blockList">
 <h4>/api/edit/store/saveTranscript</h4>
 <div class="block">Saved changes to transcript attributes to the database.
 </div>
 <dl>
 <dt><span class="paramLabel">Body:</span></dt>
 <dd>JSON-encoded representation of the transcript's annotation graph, including only
 transcript attribute layers.</dd>
 </dd>
 </dl>
 </li>
 </ul>
 <a id="deleteTranscript(java.lang.String)">
 <!--   -->
 </a>
 <ul class="blockListLast">
 <li class="blockList">
 <h4>/api/edit/store/deleteTranscript</h4>
 <pre class="methodSignature">void&nbsp;deleteTranscript&#8203;(String&nbsp;id)
 throws <a href="StoreException.html" title="class in nzilbb.ag">StoreException</a>,
 <a href="PermissionException.html" title="class in nzilbb.ag">PermissionException</a>,
 <a href="GraphNotFoundException.html" title="class in nzilbb.ag">GraphNotFoundException</a></pre>
 <div class="block">Deletes the given transcript, and all associated files.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>id</code> - The ID transcript to delete.</dd>
 </dl>
 </li>
 </ul>
 <a id="deleteParticipant(java.lang.String)">
 <!--   -->
 </a>
 <ul class="blockListLast">
 <li class="blockList">
 <h4>/api/edit/store/deleteParticipant</h4>
 <pre class="methodSignature">void&nbsp;deleteParticipant&#8203;(String&nbsp;id)
 throws <a href="StoreException.html" title="class in nzilbb.ag">StoreException</a>,
 <a href="PermissionException.html" title="class in nzilbb.ag">PermissionException</a>,
 <a href="GraphNotFoundException.html" title="class in nzilbb.ag">GraphNotFoundException</a></pre>
 <div class="block">Deletes the given participant, and all associated meta-data.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>id</code> - The ID participant to delete.</dd>
 </dl>
 </li>
 </ul>
 <a id="deleteMatchingAnnotations(java.lang.String)">
 <!--   -->
 </a>
 <ul class="blockListLast">
 <li class="blockList">
 <h4>/api/edit/store/deleteMatchingAnnotations</h4>
 <pre class="methodSignature">void&nbsp;deleteMatchingAnnotations&#8203;(String&nbsp;expression)
 throws <a href="StoreException.html" title="class in nzilbb.ag">StoreException</a>,
 <a href="PermissionException.html" title="class in nzilbb.ag">PermissionException</a>,
 <div class="block">Deletes all annotations that match a particular pattern.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>expression</code> - An expression that determines which annotations match.
  <p> The expression language is loosely based on JavaScript; expressions such as the
  following can be used: 
  <ul>
   <li><code>layer.id == 'pronunciation' 
        &amp;&amp; first('orthography').label == 'the'</code></li>
   <li><code>first('language').label == 'en' &amp;&amp; layer.id == 'pronunciation' 
        &amp;&amp; first('orthography').label == 'the'</code></li> 
  </ul>
  <p><em>NB</em> all expressions must match by either id or layer.id.
 </dd>
 <dt><span class="returnLabel">Returns:</span></dt>
 <dd>The number of new annotations deleted.</dd>
 </dl>
 </li>
 </ul>
 <a id="tagMatchingAnnotations(java.lang.String,java.lang.String,java.lang.String,java.lang.Integer)">
 <!--   -->
 </a>
 <ul class="blockListLast">
 <li class="blockList">
 <h4>/api/edit/store/tagMatchingAnnotations</h4>
 <pre class="methodSignature">void&nbsp;tagMatchingAnnotations&#8203;(String&nbsp;expression,&nbsp;String&nbsp;layerId,&nbsp;String&nbsp;label,&nbsp;Integer&nbsp;confidence)
 throws <a href="StoreException.html" title="class in nzilbb.ag">StoreException</a>,
 <a href="PermissionException.html" title="class in nzilbb.ag">PermissionException</a>,
 <div class="block">Identifies a list of annotations that match a particular pattern, and tags them on
   the given layer with the given label. If the specified layer ID does not allow peers,
   all existing tags will be deleted. Otherwise, tagging does not affect any existing tags on
   the matching annotations.</div>
 <dl>
 <dt><span class="paramLabel">Parameters:</span></dt>
 <dd><code>expression</code> - An expression that determines which annotations match.
   <p> The expression language is loosely based on JavaScript; expressions such as the
   following can be used: 
   <ul>
    <li><code>layer.id == 'orthography' &amp;&amp; label == 'word'</code></li>
    <li><code>first('language').label == 'en' &amp;&amp; layer.id == 'orthography'
         &amp;&amp; label == 'word'</code></li> 
   </ul>
   <p><em>NB</em> all expressions must match by either id or layer.id.
 </dd>
 <dd><code>layerId</code> - The layer ID of the resulting annotation.</dd>
 <dd><code>label</code> - The label of the resulting annotation.</dd>
 <dd><code>confidence</code> - The confidence rating.</dd>
 <dt><span class="returnLabel">Returns:</span></dt>
 <dd>The number of new annotations added.</dd>
 </dl>
 </li>
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Robert Fromont robert@fromont.net.nz</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#nzilbb.labbcat.server.servlet.Store">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">Store</a></span>()</code></th>
<td class="colLast">
<div class="block">Default constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init()">init</a></span>()</code></th>
<td class="colLast">
<div class="block">Initialise the servlet</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.LabbcatServlet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;<a href="LabbcatServlet.html" title="class in nzilbb.labbcat.server.servlet">LabbcatServlet</a></h3>
<code><a href="LabbcatServlet.html#getAnnotatorDir()">getAnnotatorDir</a>, <a href="LabbcatServlet.html#getFilesDir()">getFilesDir</a>, <a href="LabbcatServlet.html#getTranscriberDir()">getTranscriberDir</a>, <a href="LabbcatServlet.html#isUserInRole(java.lang.String,javax.servlet.http.HttpServletRequest,java.sql.Connection)">isUserInRole</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.HttpServlet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;HttpServlet</h3>
<code>service</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.GenericServlet">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;GenericServlet</h3>
<code>destroy, getInitParameter, getInitParameterNames, getServletConfig, getServletContext, getServletInfo, getServletName, init, log, log</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Store</h4>
<pre>public&nbsp;Store()</pre>
<div class="block">Default constructor.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="init()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>init</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;init()</pre>
<div class="block">Initialise the servlet</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="LabbcatServlet.html#init()">init</a></code>&nbsp;in class&nbsp;<code><a href="LabbcatServlet.html" title="class in nzilbb.labbcat.server.servlet">LabbcatServlet</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><a rel='license' href='http://creativecommons.org/licenses/by-sa/2.0/'><img alt='CC-BY-SA Creative Commons Licence ' src='/labbcat-server/cc-by-sa.svg' title='This work is licensed under a Creative Commons Attribution-ShareAlike 2.0 Generic License' /></a><a rel='author' href='https://www.canterbury.ac.nz/nzilbb/'><img src='/labbcat-server/nzilbb.svg' alt='Te Kāhui Roro Reo | The New Zealand Institute of Language, Brain and Behaviour' title='&copy; April 5 2023 NZILBB'></a></small></p>
</footer>
</body>
</html>
